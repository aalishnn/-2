#include <iostream>
#include <string>
#include <memory>
#include <vector>

using namespace std;

class Order {
public:
    string productName;
    int quantity;
    double price;

    Order(string name, int qty, double pr)
        : productName(name), quantity(qty), price(pr) {}
};

class PriceCalculator {
public:
    double calculateTotal(const Order& order) {
        return order.quantity * order.price * 0.9; // 10% скидка
    }
};

class PaymentProcessor {
public:
    void processPayment(const string& paymentDetails) {
        cout << "Payment processed using: " << paymentDetails << endl;
    }
};

class NotificationServiceSRP {
public:
    void sendConfirmation(const string& email) {
        cout << "Confirmation email sent to: " << email << endl;
    }
};

class Employee {
public:
    string name;
    double baseSalary;

    Employee(string n, double s) : name(n), baseSalary(s) {}
};

class SalaryCalculator {
public:
    virtual double calculate(const Employee& employee) const = 0;
    virtual ~SalaryCalculator() = default;
};

class PermanentEmployeeSalary : public SalaryCalculator {
public:
    double calculate(const Employee& employee) const override {
        return employee.baseSalary * 1.2;
    }
};

class ContractEmployeeSalary : public SalaryCalculator {
public:
    double calculate(const Employee& employee) const override {
        return employee.baseSalary * 1.1;
    }
};

class InternEmployeeSalary : public SalaryCalculator {
public:
    double calculate(const Employee& employee) const override {
        return employee.baseSalary * 0.8;
    }
};

class IPrinter {
public:
    virtual void print(const string& content) = 0;
    virtual ~IPrinter() = default;
};

class IScanner {
public:
    virtual void scan(const string& content) = 0;
    virtual ~IScanner() = default;
};

class IFax {
public:
    virtual void fax(const string& content) = 0;
    virtual ~IFax() = default;
};

class AllInOnePrinter : public IPrinter, public IScanner, public IFax {
public:
    void print(const string& content) override {
        cout << "Printing: " << content << endl;
    }
    void scan(const string& content) override {
        cout << "Scanning: " << content << endl;
    }
    void fax(const string& content) override {
        cout << "Faxing: " << content << endl;
    }
};

class BasicPrinter : public IPrinter {
public:
    void print(const string& content) override {
        cout << "Printing: " << content << endl;
    }
};

class IMessageSender {
public:
    virtual void send(const string& message) = 0;
    virtual ~IMessageSender() = default;
};

class EmailSender : public IMessageSender {
public:
    void send(const string& message) override {
        cout << "Email sent: " << message << endl;
    }
};

class SmsSender : public IMessageSender {
public:
    void send(const string& message) override {
        cout << "SMS sent: " << message << endl;
    }
};

class NotificationService {
private:
    vector<shared_ptr<IMessageSender>> senders;

public:
    void addSender(shared_ptr<IMessageSender> sender) {
        senders.push_back(sender);
    }

    void sendNotification(const string& message) {
        for (auto& sender : senders) {
            sender->send(message);
        }
    }
};

int main() {

    cout << "=== SRP TEST ===" << endl;
    Order order("Laptop", 2, 500);
    PriceCalculator calculator;
    PaymentProcessor payment;
    NotificationServiceSRP notify;

    cout << "Total price: " << calculator.calculateTotal(order) << endl;
    payment.processPayment("Credit Card");
    notify.sendConfirmation("user@mail.com");

    cout << "\n=== OCP TEST ===" << endl;
    Employee emp("Ali", 1000);
    PermanentEmployeeSalary permCalc;
    cout << "Permanent salary: " << permCalc.calculate(emp) << endl;

    cout << "\n=== ISP TEST ===" << endl;
    BasicPrinter basicPrinter;
    basicPrinter.print("Hello ISP");

    cout << "\n=== DIP TEST ===" << endl;
    NotificationService notificationService;
    notificationService.addSender(make_shared<EmailSender>());
    notificationService.addSender(make_shared<SmsSender>());
    notificationService.sendNotification("System update");

    return 0;
}
